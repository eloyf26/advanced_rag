# Production Environment Configuration
# Copy this file to .env and update with actual values

# =============================================================================
# REQUIRED - Database Configuration
# =============================================================================
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_SERVICE_KEY=your-service-key-here
TABLE_NAME=rag_documents

# =============================================================================
# REQUIRED - AI/ML Configuration
# =============================================================================
OPENAI_API_KEY=sk-your-openai-api-key-here
LLM_MODEL=gpt-4-turbo
EMBEDDING_MODEL=text-embedding-3-large
RERANK_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2

# =============================================================================
# Search Configuration
# =============================================================================
SIMILARITY_THRESHOLD=0.7
MAX_RESULTS=10
ENABLE_RERANKING=true
RERANK_TOP_K=20

# Hybrid Search Weights (must sum to 1.0)
VECTOR_WEIGHT=0.7
BM25_WEIGHT=0.3

# =============================================================================
# Agentic Features
# =============================================================================
MAX_ITERATIONS=3
MIN_SOURCES_PER_ITERATION=3
ENABLE_QUERY_PLANNING=true
ENABLE_SOURCE_TRIANGULATION=true
ENABLE_SELF_REFLECTION=true

# =============================================================================
# Performance Settings
# =============================================================================
MAX_CONCURRENT_SEARCHES=3
SEARCH_TIMEOUT_SECONDS=30
EMBEDDING_BATCH_SIZE=100
MAX_CONTEXT_LENGTH=8000
MIN_CONFIDENCE_THRESHOLD=0.3

# =============================================================================
# Caching Configuration
# =============================================================================
ENABLE_QUERY_CACHE=true
CACHE_TTL_MINUTES=60
ENABLE_EMBEDDING_CACHE=true
EMBEDDING_CACHE_SIZE=10000

# Redis Configuration (if using Redis)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# =============================================================================
# Security Settings
# =============================================================================
ENABLE_AUTHENTICATION=false
ENABLE_RATE_LIMITING=true
MAX_REQUESTS_PER_MINUTE=60

# JWT Settings (if authentication enabled)
JWT_SECRET_KEY=your-very-long-and-secure-secret-key-here
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# API Key Authentication (alternative to JWT)
API_KEY_HEADER=X-API-Key
VALID_API_KEYS=demo-key-123,readonly-key-456

# =============================================================================
# Error Handling & Resilience
# =============================================================================
MAX_RETRIES=3
RETRY_BACKOFF_FACTOR=2.0
ENABLE_GRACEFUL_DEGRADATION=true

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO
DEBUG_MODE=false
LOG_REASONING_STEPS=true
SAVE_INTERMEDIATE_RESULTS=false

# Structured Logging
ENABLE_STRUCTURED_LOGGING=true
LOG_FILE_PATH=./logs/rag_agent.log
ENABLE_FILE_ROTATION=true
MAX_LOG_FILE_SIZE=10MB
LOG_BACKUP_COUNT=5

# =============================================================================
# File Processing
# =============================================================================
MAX_FILE_SIZE_MB=100
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# Supported File Types
SUPPORTED_FILE_TYPES=pdf,docx,txt,md,csv,xlsx,html

# =============================================================================
# Monitoring & Metrics
# =============================================================================
ENABLE_PROMETHEUS_METRICS=true
PROMETHEUS_PORT=8002
METRICS_EXPORT_INTERVAL=60

# Health Check Configuration
HEALTH_CHECK_TIMEOUT=30
HEALTH_CHECK_INTERVAL=60

# =============================================================================
# Development Settings (set to false in production)
# =============================================================================
DEBUG_MODE=false
ENABLE_CORS=true
CORS_ORIGINS=*
ENABLE_DOCS=true

# =============================================================================
# Deployment Settings
# =============================================================================
HOST=0.0.0.0
PORT=8001
WORKERS=1
RELOAD=false

# Service Discovery (for microservices)
SERVICE_NAME=agentic-rag-agent
SERVICE_VERSION=1.0.0
CONSUL_URL=
EUREKA_URL=

# =============================================================================
# External Services
# =============================================================================
# Vector Database Service URL (if using external microservice)
VECTOR_DB_SERVICE_URL=http://vector-db-service:8002

# Document Processing Service URL (if using external microservice)
DOC_PROCESSING_SERVICE_URL=http://doc-processor:8003

# =============================================================================
# Advanced Features
# =============================================================================
# Enable experimental features
ENABLE_EXPERIMENTAL_FEATURES=false

# Multi-modal support
ENABLE_IMAGE_PROCESSING=false
ENABLE_AUDIO_PROCESSING=false

# Advanced analytics
ENABLE_QUERY_ANALYTICS=true
ENABLE_USER_BEHAVIOR_TRACKING=false

# =============================================================================
# Resource Limits
# =============================================================================
MAX_MEMORY_USAGE_MB=2048
MAX_CPU_USAGE_PERCENT=80
MAX_CONCURRENT_REQUESTS=100

# Database connection limits
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30