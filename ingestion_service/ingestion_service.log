2025-05-30 02:13:34,629 - __main__ - INFO - Starting Ingestion Service on 0.0.0.0:8000
2025-05-30 02:13:34,629 - __main__ - INFO - Batch API enabled: false
2025-05-30 02:13:34,629 - __main__ - INFO - Auto-process batches: false
2025-05-30 02:13:34,675 - main - INFO - Starting Ingestion Service...
2025-05-30 02:13:34,686 - main - INFO - Environment variables loaded from .env file
2025-05-30 02:13:34,686 - config - INFO - Cache directory created/verified: ingestion_cache
2025-05-30 02:13:34,686 - config - INFO - Configuration validated successfully
2025-05-30 02:13:34,686 - config - INFO - Configuration loaded successfully from environment
2025-05-30 02:13:35,081 - processors.ingestion_service - INFO - Supabase client initialized successfully
2025-05-30 02:13:35,388 - processors.ingestion_service - INFO - OpenAI client initialized successfully
2025-05-30 02:13:35,391 - processors.ingestion_service - INFO - LlamaIndex settings configured successfully
2025-05-30 02:13:35,582 - processors.context_aware_chunker - INFO - Context-aware chunker initialized
2025-05-30 02:14:02,118 - easyocr.easyocr - WARNING - Neither CUDA nor MPS are available - defaulting to CPU. Note: This module is much faster with a GPU.
2025-05-30 02:14:04,436 - processors.multimodal_processor - INFO - OCR model initialized
2025-05-30 02:14:05,488 - processors.multimodal_processor - INFO - Whisper model initialized
2025-05-30 02:14:05,488 - processors.multimodal_processor - INFO - Extended multi-modal processor initialized with 94 file type handlers
2025-05-30 02:14:05,488 - processors.metadata_extractor - INFO - Initialized 4 metadata extractors
2025-05-30 02:14:05,488 - processors.metadata_extractor - INFO - Metadata extractor initialized
2025-05-30 02:14:05,488 - processors.ingestion_service - INFO - Processors initialized successfully
2025-05-30 02:14:05,490 - processors.ingestion_service - INFO - Supabase RAG Ingestion Service initialized successfully
2025-05-30 02:14:05,490 - main - INFO - Ingestion service initialized successfully
2025-05-30 02:14:06,110 - httpx - INFO - HTTP Request: GET https://dcgbnntxayqoqxoojdzj.supabase.co/rest/v1/rag_documents?select=count&limit=1 "HTTP/2 200 OK"
2025-05-30 02:14:06,110 - processors.ingestion_service - INFO - Supabase connection test successful
2025-05-30 02:14:07,097 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-05-30 02:14:07,185 - processors.ingestion_service - INFO - OpenAI connection test successful
2025-05-30 02:14:07,185 - main - INFO - Database connection verified
2025-05-30 02:14:07,185 - main - INFO - Starting automatic batch processor
2025-05-30 02:14:07,185 - main - INFO - Running scheduled batch processing check
2025-05-30 02:14:07,285 - httpx - INFO - HTTP Request: GET https://dcgbnntxayqoqxoojdzj.supabase.co/rest/v1/embedding_batch_jobs?select=%2A&status=eq.pending "HTTP/2 200 OK"
2025-05-30 02:14:07,285 - main - INFO - Batch processing result: {'pending': 0, 'processed': 0, 'failed': 0}
2025-05-30 02:15:06,364 - httpx - INFO - HTTP Request: POST https://dcgbnntxayqoqxoojdzj.supabase.co/rest/v1/rpc/get_document_stats "HTTP/2 200 OK"
2025-05-30 02:15:06,476 - httpx - INFO - HTTP Request: GET https://dcgbnntxayqoqxoojdzj.supabase.co/rest/v1/embedding_batch_jobs?select=status "HTTP/2 200 OK"
2025-05-30 02:15:08,607 - httpx - INFO - HTTP Request: POST https://dcgbnntxayqoqxoojdzj.supabase.co/rest/v1/rpc/get_document_stats "HTTP/2 200 OK"
2025-05-30 02:15:08,676 - httpx - INFO - HTTP Request: GET https://dcgbnntxayqoqxoojdzj.supabase.co/rest/v1/embedding_batch_jobs?select=status "HTTP/2 200 OK"
2025-05-30 02:15:10,744 - processors.ingestion_service - INFO - Processing file: C:/Users/eloyfernandez/Documents/Eloy/repos/Agentic RAG/advanced_rag/ingestion_service/testing-examples/test_documents/readme.md
2025-05-30 02:15:11,729 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:12,448 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:12,458 - openai._base_client - INFO - Retrying request to /chat/completions in 0.455348 seconds
2025-05-30 02:15:13,744 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:13,744 - openai._base_client - INFO - Retrying request to /chat/completions in 0.396603 seconds
2025-05-30 02:15:14,823 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:14,840 - openai._base_client - INFO - Retrying request to /chat/completions in 0.398798 seconds
2025-05-30 02:15:16,665 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:16,688 - openai._base_client - INFO - Retrying request to /chat/completions in 0.425118 seconds
2025-05-30 02:15:17,882 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:18,522 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:18,535 - openai._base_client - INFO - Retrying request to /chat/completions in 0.381696 seconds
2025-05-30 02:15:20,342 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:20,342 - openai._base_client - INFO - Retrying request to /chat/completions in 0.386556 seconds
2025-05-30 02:15:21,555 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:21,571 - openai._base_client - INFO - Retrying request to /chat/completions in 0.485559 seconds
2025-05-30 02:15:24,388 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:24,404 - openai._base_client - INFO - Retrying request to /chat/completions in 0.497537 seconds
2025-05-30 02:15:25,811 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:26,596 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:26,614 - openai._base_client - INFO - Retrying request to /chat/completions in 0.419255 seconds
2025-05-30 02:15:28,137 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:28,146 - openai._base_client - INFO - Retrying request to /chat/completions in 0.467175 seconds
2025-05-30 02:15:29,427 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:29,434 - openai._base_client - INFO - Retrying request to /chat/completions in 0.393730 seconds
2025-05-30 02:15:32,374 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:32,386 - openai._base_client - INFO - Retrying request to /chat/completions in 0.429645 seconds
2025-05-30 02:15:34,028 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:34,546 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:34,567 - openai._base_client - INFO - Retrying request to /chat/completions in 0.451340 seconds
2025-05-30 02:15:35,942 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:35,950 - openai._base_client - INFO - Retrying request to /chat/completions in 0.406481 seconds
2025-05-30 02:15:37,037 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:37,051 - openai._base_client - INFO - Retrying request to /chat/completions in 0.392657 seconds
2025-05-30 02:15:39,138 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:39,159 - openai._base_client - INFO - Retrying request to /chat/completions in 0.462485 seconds
2025-05-30 02:15:40,372 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:41,091 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:41,100 - openai._base_client - INFO - Retrying request to /chat/completions in 0.469242 seconds
2025-05-30 02:15:42,637 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:42,649 - openai._base_client - INFO - Retrying request to /chat/completions in 0.377418 seconds
2025-05-30 02:15:43,706 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:43,722 - openai._base_client - INFO - Retrying request to /chat/completions in 0.426937 seconds
2025-05-30 02:15:45,947 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:45,962 - openai._base_client - INFO - Retrying request to /chat/completions in 0.472458 seconds
2025-05-30 02:15:47,143 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:47,811 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:47,821 - openai._base_client - INFO - Retrying request to /chat/completions in 0.376060 seconds
2025-05-30 02:15:49,549 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:49,557 - openai._base_client - INFO - Retrying request to /chat/completions in 0.378806 seconds
2025-05-30 02:15:50,557 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:50,565 - openai._base_client - INFO - Retrying request to /chat/completions in 0.484895 seconds
2025-05-30 02:15:52,660 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:52,671 - openai._base_client - INFO - Retrying request to /chat/completions in 0.404884 seconds
2025-05-30 02:15:53,808 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:54,289 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:54,289 - openai._base_client - INFO - Retrying request to /chat/completions in 0.404076 seconds
2025-05-30 02:15:55,858 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:55,868 - openai._base_client - INFO - Retrying request to /chat/completions in 0.395591 seconds
2025-05-30 02:15:56,964 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:56,973 - openai._base_client - INFO - Retrying request to /chat/completions in 0.495022 seconds
2025-05-30 02:15:59,373 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:15:59,388 - openai._base_client - INFO - Retrying request to /chat/completions in 0.443084 seconds
2025-05-30 02:16:00,504 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:16:01,022 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:16:01,022 - openai._base_client - INFO - Retrying request to /chat/completions in 0.449152 seconds
2025-05-30 02:16:02,332 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-05-30 02:16:02,342 - openai._base_client - INFO - Retrying request to /chat/completions in 0.448918 seconds
2025-05-30 02:16:03,272 - main - INFO - Shutting down ingestion service
2025-05-30 02:16:03,272 - processors.ingestion_service - INFO - Cleaning up ingestion service resources
2025-05-30 02:16:03,464 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
